description = "Fix issues from code review"
prompt = """

# Fix Review Issues

Take review findings and systematically fix HIGH+ severity issues.

## Input

Review findings (pasted by user):

$ARGUMENTS


## Process

### Step 1: Parse and Prioritize

Extract all issues from the findings above. Categorize by severity:
- **CRITICAL** — Fix immediately (security, crashes, data loss)
- **HIGH** — Fix in this session (bugs, broken UX, performance)
- **MEDIUM/LOW** — Note but skip (code quality, style)

### Step 2: Verify Each Issue

For each HIGH+ issue:
1. **Check if it actually exists** — read the code, confirm the problem
2. **If doesn't exist** — note as "Invalid" with explanation (reviewer may have misread)
3. **If exists** — add to fix list

### Step 3: Fix and Test

For each confirmed issue:
1. Apply the fix
2. Run relevant test:
   - Type check: `cd backend && uv run mypy . --ignore-missing-imports` or `cd frontend && npx tsc --noEmit`
   - If endpoint changed: quick curl test
3. Verify fix doesn't break anything else

### Step 4: Skip with Reason

For issues you're NOT fixing, explain why:
- "Invalid — code already handles this case at line X"
- "Deferred — requires architectural decision from user"
- "Out of scope — unrelated to current changes"

## Output Format

```
## Fix Report

### Issues Fixed
1. [CRITICAL] [file:line] Description
   - Fix: What was changed
   - Verified: How it was tested

2. [HIGH] [file:line] Description
   - Fix: What was changed
   - Verified: How it was tested

### Issues Skipped
1. [MEDIUM] [file:line] Description
   - Reason: Below threshold (MEDIUM)

2. [HIGH] [file:line] Description
   - Reason: Invalid — [explanation]

### Test Results (Post-Fix)
- Backend types: PASS/FAIL
- Frontend types: PASS/FAIL

### Summary
- Fixed: X issues
- Skipped: Y issues (Z invalid, W deferred, V out of scope)
- Remaining HIGH+: [count] — [list if any]
```

## Important

- Only fix HIGH and CRITICAL — don't gold-plate
- If a fix seems risky or requires user input, skip and note it
- Run type checks after all fixes to catch regressions
- Be honest about invalid findings — reviewers make mistakes too
"""
